<!DOCTYPE html>
<html>

<head>
  <script src="splide.min.js"></script>
  <link rel="stylesheet" href="splide.min.css">
  <link rel="stylesheet" href="splide-sea-green.min.css">
  <style>
    .splide__slide img {
      width: 100%;
      height: 'auto';
      white-space: normal;
    }

    .myButton2 {
      background-color: #4CAF50;
      border-radius: 6pt;
      border: 1pt solid #18ab29;
      display: inline-block;
      cursor: pointer;
      color: #ffffff;
      font-family: Arial;
      font-size: 24px;
      padding: 2pt 10pt;
      text-decoration: none;
      text-shadow: 0px 1pt 0pt #2f6627;
    }
  </style>
</head>

<body>
  <div id="image-slider" class="splide">
    <div class="splide__track">
      <ul id="slideslist" class="splide__list">
      </ul>
    </div>
  </div>
  <script>

    const files = [
      "ewelink.png",
      "scenarios.png",
      "login.png",
      "googlelogin.png",
      "create.png",
      "allowpopups.png",
      "renamesaverun.png",
      "allow1.png",
      "allow2.png",
      "allow3.png",
      "allow4.png",
      "allow5.png",
      "scriptdone.png",
      "firstdata.png",
      "gototriggers.png",
      "addtrigger.png",
      "tunetrigger.png",
      "edittrigger.png"
    ];

    const menu = document.getElementById("mainmenu");
    
    var w = document.body.clientWidth;
    var h = document.body.clientHeight;
    if(menu) h -= menu.clientHeight;
    h -= w2ui.layout_main_toolbar.box.clientHeight  + 32;

    var nSlides = w*(1080+96)/h/(1920+96); 
    if(nSlides<1)nSlides=1;

    const slideslist = document.getElementById("slideslist");
    for (var i = 0; i < files.length; i++) {
      slideslist.insertAdjacentHTML('beforeend', `<li id="slide${i}" class="splide__slide"><img src="slides/${curLanguage()}/${files[i]}"></li>`);
    }
    const slide = document.getElementById("slide3");
    slide.insertAdjacentHTML('beforeend',
      `<button onclick="removeHelp()" class="myButton2" style = "align: center; position: absolute;top: 50%; left:50%; transform: translateX(-50%);">${textByID('TOBLOCKS')}</button>`);

    const last = document.getElementById(`slide${files.length - 1}`);
    last.insertAdjacentHTML('beforeend',
      `<button onclick="removeHelp()" class="myButton2" style = "align: center; position: absolute;top: 80%; left:50%; transform: translateX(-50%);">${textByID('TOPROJECTS')}</button>`);

    console.log("start");
    function runOnStart() {
      new Splide('#image-slider', {
        focus: 'center',
        perPage: nSlides,
      }).mount();
    }
    setTimeout( () => {
      if (document.readyState !== 'loading') {
        runOnStart();
      }
      else {
        document.addEventListener('DOMContentLoaded', function () {
          runOnStart()
        });
      }
    }, 500);
  </script>
</body>

</html>